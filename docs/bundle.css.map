{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.svelte",
    "..\\src\\PalettePreview.svelte",
    "..\\src\\Export.svelte",
    "..\\src\\StepChart.svelte",
    "..\\src\\Card.svelte",
    "..\\src\\ColorBlindCheck.svelte",
    "..\\src\\ButtonGroup.svelte",
    "..\\src\\AIChatbot.svelte",
    "..\\src\\ColorList.svelte",
    "..\\src\\Color.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n    import chroma from 'chroma-js';\r\n    import { beforeUpdate } from 'svelte';\r\n    import Checkbox from './Checkbox.svelte';\r\n    import InputColors from './InputColors.svelte';\r\n    import PalettePreview from './PalettePreview.svelte';\r\n    import Export from './Export.svelte';\r\n    import StepChart from './StepChart.svelte';\r\n    import Card from './Card.svelte';\r\n    import ColorBlindCheck from './ColorBlindCheck.svelte';\r\n    import ButtonGroup from './ButtonGroup.svelte';\r\n    import AIChatbot from './AIChatbot.svelte';\r\n\r\n    let steps = [];\r\n    let bezier = true;\r\n    let correctLightness = true;\r\n\r\n    let colors = '00429d,96ffea,ffffe0'.split(/\\s*,\\s*/).map(c => chroma(c));\r\n    let colors2 = 'ffffe0,ff005e,93003a'.split(/\\s*,\\s*/).map(c => chroma(c));\r\n    let numColors = 9;\r\n    let mode = 'sequential';\r\n    let simulate = 'none';\r\n\r\n    const baseHref = `${window.location.pathname}${window.location.search}`;\r\n    let _historyKey = '';\r\n    let _historyReady = false;\r\n    let _applyingFromHistory = false;\r\n\r\n    if (window.location.hash) {\r\n        readStateFromHash();\r\n    }\r\n\r\n    const isMac = navigator.platform.toUpperCase().includes('MAC');\r\n\r\n    let _mode = 'sequential';\r\n    const validSimulations = ['none', 'deuteranopia', 'protanopia', 'tritanopia'];\r\n\r\n    function clampNumColors(value) {\r\n        const n = Math.round(+value);\r\n        if (!isFinite(n)) return 2;\r\n        return Math.min(50, Math.max(2, n));\r\n    }\r\n\r\n    $: {\r\n        const clamped = clampNumColors(numColors);\r\n        if (numColors !== clamped) {\r\n            numColors = clamped;\r\n        }\r\n    }\r\n\r\n    function getCurrentState() {\r\n        return {\r\n            numColors,\r\n            mode: mode.substr(0, 1),\r\n            colors: colors.map(c => c.hex().substr(1)).join(','),\r\n            colors2: colors2.length ? colors2.map(c => c.hex().substr(1)).join(',') : '',\r\n            correctLightness: correctLightness ? 1 : 0,\r\n            bezier: bezier ? 1 : 0,\r\n            simulate\r\n        };\r\n    }\r\n\r\n    function getStateKey(state) {\r\n        return [\r\n            state.numColors,\r\n            state.mode,\r\n            state.colors,\r\n            state.colors2,\r\n            state.correctLightness,\r\n            state.bezier,\r\n            state.simulate\r\n        ].join('|');\r\n    }\r\n\r\n    beforeUpdate(() => {\r\n        if (!_applyingFromHistory) {\r\n            const state = getCurrentState();\r\n            const key = getStateKey(state);\r\n            if (!_historyReady) {\r\n                history.replaceState(state, '', baseHref);\r\n                _historyReady = true;\r\n                _historyKey = key;\r\n            } else if (key !== _historyKey) {\r\n                history.pushState(state, '', baseHref);\r\n                _historyKey = key;\r\n            }\r\n        }\r\n        if (mode !== _mode) {\r\n            if (mode === 'diverging' && !colors2.length) {\r\n                colors2 = colors.slice(0).reverse();\r\n            }\r\n            _mode = mode;\r\n        }\r\n    });\r\n\r\n    function readStateFromHash() {\r\n        const raw = window.location.hash.startsWith('#/') ? window.location.hash.substr(2) : '';\r\n        // Be tolerant of percent-encoding (and occasional double-encoding) so shared links work\r\n        // across chat apps and browsers.\r\n        let decoded = raw;\r\n        for (let i = 0; i < 2; i++) {\r\n            try {\r\n                decoded = decodeURIComponent(decoded);\r\n            } catch (e) {\r\n                break;\r\n            }\r\n        }\r\n        decoded = decoded.replace(/%7C/gi, '|');\r\n        const parts = decoded.split('|');\r\n        if (parts.length === 6) {\r\n            const parsedNumColors = Math.round(+parts[0]);\r\n            const parsedMode =\r\n                parts[1] === 's' ? 'sequential' : parts[1] === 'd' ? 'diverging' : null;\r\n            if (!isFinite(parsedNumColors) || parsedNumColors < 2 || parsedNumColors > 50 || !parsedMode) {\r\n                return;\r\n            }\r\n\r\n            const parsedColors = toChromaList(parts[2].split(','), colors);\r\n            const parsedColors2 = parts[3] !== '' ? toChromaList(parts[3].split(','), colors2) : [];\r\n\r\n            numColors = parsedNumColors;\r\n            mode = parsedMode;\r\n            _mode = parsedMode;\r\n            colors = parsedColors;\r\n            colors2 = parsedColors2;\r\n            correctLightness = parts[4] === '1';\r\n            bezier = parts[5] === '1';\r\n        }\r\n    }\r\n\r\n    function hashChange() {\r\n        if (window.location.hash) {\r\n            readStateFromHash();\r\n            const current = getCurrentState();\r\n            history.replaceState(current, '', baseHref);\r\n            _historyKey = getStateKey(current);\r\n            _historyReady = true;\r\n        }\r\n    }\r\n\r\n    function applyHistoryState(state, fallbackColors, fallbackColors2) {\r\n        const parsedNumColors = Math.round(+state.numColors);\r\n        const parsedMode =\r\n            state.mode === 's'\r\n                ? 'sequential'\r\n                : state.mode === 'd'\r\n                  ? 'diverging'\r\n                  : state.mode === 'sequential' || state.mode === 'diverging'\r\n                    ? state.mode\r\n                    : null;\r\n        if (!isFinite(parsedNumColors) || parsedNumColors < 2 || parsedNumColors > 50 || !parsedMode) return false;\r\n\r\n        const parsedColors = toChromaList(\r\n            String(state.colors || '')\r\n                .split(',')\r\n                .filter(Boolean),\r\n            fallbackColors\r\n        );\r\n        const parsedColors2 = String(state.colors2 || '').trim()\r\n            ? toChromaList(\r\n                  String(state.colors2)\r\n                      .split(',')\r\n                      .filter(Boolean),\r\n                  fallbackColors2\r\n              )\r\n            : [];\r\n\r\n        numColors = parsedNumColors;\r\n        mode = parsedMode;\r\n        _mode = parsedMode;\r\n        colors = parsedColors;\r\n        colors2 = parsedColors2;\r\n        correctLightness = String(state.correctLightness) === '1' || state.correctLightness === true;\r\n        bezier = String(state.bezier) === '1' || state.bezier === true;\r\n        simulate = validSimulations.includes(state.simulate) ? state.simulate : 'none';\r\n        return true;\r\n    }\r\n\r\n    function onPopState(event) {\r\n        const state = event && event.state;\r\n        if (!state) return;\r\n        _applyingFromHistory = true;\r\n        try {\r\n            if (!applyHistoryState(state, colors, colors2)) return;\r\n            _historyKey = getStateKey(getCurrentState());\r\n            _historyReady = true;\r\n        } finally {\r\n            _applyingFromHistory = false;\r\n        }\r\n    }\r\n\r\n    function normalizeHex(rawColor) {\r\n        if (typeof rawColor !== 'string') return null;\r\n        const trimmed = rawColor.trim();\r\n        if (!trimmed) return null;\r\n        return trimmed[0] === '#' ? trimmed : `#${trimmed}`;\r\n    }\r\n\r\n    function toChromaList(rawColors, fallback) {\r\n        if (!Array.isArray(rawColors) || !rawColors.length) return fallback;\r\n        const parsed = rawColors\r\n            .map(normalizeHex)\r\n            .filter(Boolean)\r\n            .map(color => {\r\n                try {\r\n                    return chroma(color);\r\n                } catch (e) {\r\n                    return null;\r\n                }\r\n            })\r\n            .filter(Boolean);\r\n        return parsed.length ? parsed : fallback;\r\n    }\r\n\r\n    function handleApplyPalette(event) {\r\n        const config = event && event.detail ? event.detail : {};\r\n\r\n        if (config.mode === 'sequential' || config.mode === 'diverging') {\r\n            mode = config.mode;\r\n        }\r\n\r\n        const parsedNumColors = Math.round(+config.numColors);\r\n        if (isFinite(parsedNumColors) && parsedNumColors >= 2 && parsedNumColors <= 50) {\r\n            numColors = parsedNumColors;\r\n        }\r\n\r\n        if (typeof config.bezier === 'boolean') {\r\n            bezier = config.bezier;\r\n        }\r\n        if (typeof config.correctLightness === 'boolean') {\r\n            correctLightness = config.correctLightness;\r\n        }\r\n\r\n        colors = toChromaList(config.colors, colors);\r\n\r\n        if (mode === 'diverging') {\r\n            colors2 = toChromaList(config.colors2, colors2.length ? colors2 : colors.slice(0).reverse());\r\n        } else {\r\n            colors2 = [];\r\n        }\r\n    }\r\n\r\n    function goBack() {\r\n        history.back();\r\n    }\r\n\r\n    function goForward() {\r\n        history.forward();\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .head {\r\n        margin: 1.5em 0 1.8em;\r\n    }\r\n    .head-top {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        gap: 12px;\r\n    }\r\n    .history-controls {\r\n        display: inline-flex;\r\n        gap: 6px;\r\n    }\r\n    .history-btn {\r\n        margin: 0;\r\n        padding: 0.26rem 0.7rem;\r\n        border: 1px solid #d1d5db;\r\n        border-radius: 8px;\r\n        background: #fff;\r\n        color: #374151;\r\n        font-size: 0.85rem;\r\n        font-weight: 600;\r\n        line-height: 1.3;\r\n        cursor: pointer;\r\n    }\r\n    .history-btn:hover {\r\n        background: #f9fafb;\r\n    }\r\n    .head p {\r\n        color: #6b7280;\r\n        font-size: 0.92rem;\r\n        margin-bottom: 0;\r\n    }\r\n    .step1-row {\r\n        display: flex;\r\n        align-items: center;\r\n        flex-wrap: wrap;\r\n        gap: 0.75rem;\r\n    }\r\n    .step1-row .step1-field:first-child {\r\n        flex: 0 0 55%;\r\n    }\r\n    .step1-field {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 0.6rem;\r\n    }\r\n    .step1-field .label-text {\r\n        color: #4b5563;\r\n        white-space: nowrap;\r\n    }\r\n    input[type='number'] {\r\n        width: 4.2em;\r\n        text-align: center;\r\n        margin: 0;\r\n        border: 2px solid #d1d5db;\r\n        border-radius: 8px;\r\n        background: #fff;\r\n        font-weight: 700;\r\n        font-size: 0.98rem;\r\n        padding: 0.4em 0.5em;\r\n    }\r\n    input[type='number']:focus {\r\n        outline: none;\r\n        border-color: #4b6cb7;\r\n    }\r\n    .foot {\r\n        margin: 16px 0 0;\r\n        padding-bottom: 20px;\r\n    }\r\n    .foot hr {\r\n        border-color: #e5e7eb;\r\n        margin: 0 0 10px;\r\n    }\r\n    .foot p {\r\n        color: #4b5563;\r\n        font-size: 0.9rem;\r\n        margin: 0;\r\n    }\r\n    .repo-links {\r\n        margin-top: 10px;\r\n        display: inline-flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n    }\r\n    .repo-link {\r\n        width: 30px;\r\n        height: 30px;\r\n        border-radius: 999px;\r\n        border: 1px solid #d1d5db;\r\n        background: #fff;\r\n        color: #111;\r\n        display: inline-flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        text-decoration: none;\r\n    }\r\n    .repo-link:hover {\r\n        background: #f9fafb;\r\n        color: #000;\r\n    }\r\n    .repo-link svg {\r\n        width: 16px;\r\n        height: 16px;\r\n    }\r\n    .foot p a {\r\n        color: #3b6fc4;\r\n    }\r\n    .foot p a:hover {\r\n        color: #3b6fc4;\r\n    }\r\n    kbd {\r\n        background-color: #f3f4f6;\r\n        border: 1px solid #d1d5db;\r\n        border-radius: 4px;\r\n        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.08);\r\n        color: #374151;\r\n        display: inline-block;\r\n        line-height: 1.4;\r\n        margin: 0 0.1em;\r\n        padding: 0.1em 0.5em;\r\n        font-size: 0.85em;\r\n    }\r\n    :global(.custom-control-label) {\r\n        color: #4b5563;\r\n        font-size: 0.93rem;\r\n    }\r\n</style>\r\n\r\n<svelte:window on:hashchange={hashChange} on:popstate={onPopState} />\r\n\r\n<div class=\"container\">\r\n    <div class=\"head\">\r\n        <div class=\"head-top\">\r\n            <h1>Color Den: chroma.js Color Palette Copilot</h1>\r\n            <div class=\"history-controls\" aria-label=\"Palette history controls\">\r\n                <button class=\"history-btn\" type=\"button\" on:click={goBack} title=\"Go to previous palette state\">Back</button>\r\n                <button class=\"history-btn\" type=\"button\" on:click={goForward} title=\"Go to next palette state\">Forward</button>\r\n            </div>\r\n        </div>\r\n        <p>This <a href=\"https://github.com/gka/chroma.js\" target=\"_blank\">chroma.js</a>-powered tool is here to help us master <a href=\"https://www.vis4.net/blog/mastering-multi-hued-color-scales/\" target=\"_blank\">multi-hued, multi-stop color scales</a>, with a little help from AI.</p>\r\n    </div>\r\n    <Card step=\"1\" title=\"What kind of palette do you want to create?\">\r\n        <div class=\"step1-row\">\r\n            <div class=\"step1-field\">\r\n                <span class=\"label-text\">Palette type:</span>\r\n                <ButtonGroup options={['sequential', 'diverging']} bind:value={mode} />\r\n            </div>\r\n            <div class=\"step1-field\">\r\n                <span class=\"label-text\">Number of colors:</span>\r\n                <input\r\n                    type=\"number\"\r\n                    min=\"2\"\r\n                    max=\"50\"\r\n                    bind:value={numColors}\r\n                    on:input={() => (numColors = clampNumColors(numColors))} />\r\n            </div>\r\n        </div>\r\n    </Card>\r\n\r\n    <Card step=\"2\" title=\"Select and arrange input colors\">\r\n        <InputColors diverging={mode === 'diverging'} bind:colors bind:colors2 />\r\n    </Card>\r\n\r\n    <Card step=\"3\" title=\"Check and configure the resulting palette\">\r\n        <div class=\"row\" style=\"margin-bottom: 10px\">\r\n            <div class=\"col-md\">\r\n                <Checkbox bind:value={correctLightness} label=\"correct lightness\" title=\"Adjust luminance so palette colors have perceptually even steps (avoids some appearing too dark or too light).\" />\r\n                <Checkbox bind:value={bezier} label=\"bezier interpolation\" title=\"Interpolate along a BÃ©zier curve in color space for smoother or more natural-looking gradients between colors.\" />\r\n            </div>\r\n            <div class=\"col-md\">\r\n                <ColorBlindCheck bind:colors={steps} bind:active={simulate} />\r\n            </div>\r\n        </div>\r\n        <PalettePreview\r\n            bind:steps\r\n            bind:correctLightness\r\n            bind:bezier\r\n            bind:colors\r\n            bind:colors2\r\n            diverging={mode === 'diverging'}\r\n            simulate={simulate}\r\n            bind:numColors />\r\n        <div class=\"row\">\r\n            <div class=\"col-md\">\r\n                <StepChart title=\"lightness\" steps={steps} mode={0} />\r\n            </div>\r\n            <div class=\"col-md\">\r\n                <StepChart title=\"saturation\" steps={steps} mode={1} />\r\n            </div>\r\n            <div class=\"col-md\">\r\n                <StepChart title=\"hue\" steps={steps} mode={2} />\r\n            </div>\r\n        </div>\r\n    </Card>\r\n\r\n    <Card step=\"4\" title=\"Export the color codes in various formats\">\r\n        <Export steps={steps} />\r\n    </Card>\r\n    <div class=\"foot\">\r\n        <hr>\r\n        <p>\r\n            Created by <a href=\"https://vis4.net/blog\" target=\"_blank\" rel=\"noopener noreferrer\">Gregor Aisch</a> for the sake of better use of colors\r\n            in maps and data visualizations, forked and extended by\r\n            <a href=\"https://giobuzala.com/\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n                >Giorgi Buzaladze</a\r\n            >\r\n            with an added AI layer.\r\n        </p>\r\n        <div class=\"repo-links\" aria-label=\"Repository links\">\r\n            <a\r\n                class=\"repo-link\"\r\n                href=\"https://github.com/gka/palettes\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"Original repository (gka/palettes)\"\r\n                aria-label=\"Original repository on GitHub\">\r\n                <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                    <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52 0-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.5-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.55 7.55 0 012 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0016 8c0-4.42-3.58-8-8-8z\"></path>\r\n                </svg>\r\n            </a>\r\n            <a\r\n                class=\"repo-link\"\r\n                href=\"https://github.com/giobuzala/color-den\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"Fork repository (giobuzala/color-den)\"\r\n                aria-label=\"Fork repository on GitHub\">\r\n                <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                    <path d=\"M5 3.09a2.5 2.5 0 11-1 0V2.5a2.5 2.5 0 115 0v.59a2.5 2.5 0 11-1 0V2.5a1.5 1.5 0 10-3 0v.59zM3.5 4a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm5 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3zM2 9.5A2.5 2.5 0 014.5 7h3A2.5 2.5 0 0110 9.5V12a2 2 0 11-1 0V9.5A1.5 1.5 0 007.5 8h-3A1.5 1.5 0 003 9.5V12a2 2 0 11-1 0V9.5zm.5 3.5a1 1 0 100 2 1 1 0 000-2zm6 0a1 1 0 100 2 1 1 0 000-2z\"></path>\r\n                </svg>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<AIChatbot on:applyPalette={handleApplyPalette} />",
    "<script>\r\n    import chroma from 'chroma-js';\r\n    import { colorBlindSim } from './colorBlind';\r\n    import _range from 'lodash-es/range';\r\n\r\n    export let colors = ['red'];\r\n    export let colors2 = [];\r\n    export let numColors = 7;\r\n    export let diverging = false;\r\n    export let bezier;\r\n    export let correctLightness;\r\n\r\n    export let simulate = 'none';\r\n    export let steps;\r\n\r\n    $: even = numColors % 2 === 0;\r\n\r\n    $: numColorsLeft = diverging ? Math.ceil(numColors / 2) + (even ? 1 : 0) : numColors;\r\n    $: numColorsRight = diverging ? Math.ceil(numColors / 2) + (even ? 1 : 0) : 0;\r\n\r\n    $: genColors = colors.length !== 1 ? colors : autoColors(colors[0], numColorsLeft);\r\n    $: genColors2 = colors2.length !== 1 ? colors2 : autoColors(colors2[0], numColorsRight, true);\r\n\r\n    $: stepsLeft = colors.length\r\n        ? chroma\r\n              .scale(bezier && colors.length > 1 ? chroma.bezier(genColors) : genColors)\r\n              .correctLightness(correctLightness)\r\n              .colors(numColorsLeft)\r\n        : [];\r\n\r\n    $: stepsRight = diverging && colors2.length\r\n        ? chroma\r\n              .scale(bezier && colors2.length > 1 ? chroma.bezier(genColors2) : genColors2)\r\n              .correctLightness(correctLightness)\r\n              .colors(numColorsRight)\r\n        : [];\r\n\r\n    $: steps = (even && diverging ? stepsLeft.slice(0, stepsLeft.length - 1) : stepsLeft).concat(\r\n        stepsRight.slice(1)\r\n    );\r\n\r\n    function autoGradient(color, numColors) {\r\n        const lab = chroma(color).lab();\r\n        const lRange = 100 * (0.95 - 1 / numColors);\r\n        const lStep = lRange / (numColors - 1);\r\n        const lStart = (100 - lRange) * 0.5;\r\n        const range = _range(lStart, lStart + numColors * lStep, lStep);\r\n        let offset = 0;\r\n        if (!diverging) {\r\n            offset = 9999;\r\n            for (let i = 0; i < numColors; i++) {\r\n                const diff = lab[0] - range[i];\r\n                if (Math.abs(diff) < Math.abs(offset)) {\r\n                    offset = diff;\r\n                }\r\n            }\r\n        }\r\n        return range.map(l => chroma.lab([l + offset, lab[1], lab[2]]));\r\n    }\r\n\r\n    function autoColors(color, numColors, reverse = false) {\r\n        if (diverging) {\r\n            const generated = autoGradient(color, 3).concat(chroma('#f5f5f5'));\r\n            if (reverse) generated.reverse();\r\n            return generated;\r\n        }\r\n        return autoGradient(color, numColors);\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .palette {\r\n        background: #f3f4f6;\r\n        padding: 6px;\r\n        display: flex;\r\n        height: 112px;\r\n        border-radius: 10px;\r\n        box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.08);\r\n        overflow: hidden;\r\n    }\r\n    .step {\r\n        height: 100%;\r\n        display: block;\r\n        flex-grow: 1;\r\n    }\r\n    .step:first-child {\r\n        border-radius: 6px 0 0 6px;\r\n    }\r\n    .step:last-child {\r\n        border-radius: 0 6px 6px 0;\r\n    }\r\n</style>\r\n\r\n<div class=\"palette\">\r\n    {#each steps as step}\r\n        <div\r\n            class=\"step\"\r\n            style=\"background: {simulate === 'none' ? step : colorBlindSim(step, simulate)}\"></div>\r\n    {/each}\r\n</div>",
    "<script>\r\n    export let steps = [];\r\n</script>\r\n\r\n<style>\r\n    pre {\r\n        padding: 1ex;\r\n        background: #eee;\r\n        white-space: pre-wrap;\r\n    }\r\n</style>\r\n\r\n<pre>{steps}</pre>\r\n<pre>'{steps.join(`', '`)}'</pre>\r\n<pre>['{steps.join(`', '`)}']</pre>\r\n<pre>{steps.join('\\n')}</pre>\r\n<pre>[{steps.map(c => '0x'+c.substr(1)).join(`,`)}]</pre>\r\n<pre>\r\nimport &#123; scaleThreshold &#125; from 'd3-scale';\r\n\r\nfunction palette(min, max) &#123;\r\n    const d = (max-min)/{steps.length};\r\n    return = scaleThreshold()\r\n        .range(['{steps.join(`', '`)}'])\r\n        .domain([{steps.slice(1).map((v,i) => `min + d*${i+1}`)}]);\r\n&#125;\r\n</pre>",
    "<script>\r\n    import { scaleLinear } from 'd3-scale';\r\n    import { extent } from 'd3-array';\r\n    import { line, curveStepAfter } from 'd3-shape';\r\n    import chroma from 'chroma-js';\r\n\r\n    let width;\r\n    $: height = width * 0.7;\r\n    export let title = '';\r\n\r\n    const padding = {\r\n        left: 30,\r\n        right: 10,\r\n        top: 20,\r\n        bottom: 20\r\n    };\r\n\r\n    export let steps = [];\r\n    export let mode = 0;\r\n\r\n    // mode: 0=lightness, 1=chroma/saturation, 2=hue (from LCH)\r\n    $: values = steps.map(c => chroma(c).lch()[mode]);\r\n    $: values2 = values.length ? values.concat(values[values.length - 1]) : [];\r\n\r\n    $: xScale = scaleLinear()\r\n        .domain([0, steps.length])\r\n        .range([padding.left, width - padding.right]);\r\n\r\n    $: minDomain = mode === 1 ? 80 : 50;\r\n    let yDomain;\r\n    $: {\r\n        yDomain = extent(values);\r\n        const diff = Math.abs(yDomain[1] - yDomain[0]);\r\n        if (diff < minDomain) {\r\n            yDomain[0] -= (minDomain-diff)*0.5;\r\n            yDomain[1] += (minDomain-diff)*0.5;\r\n            yDomain = yDomain;\r\n        }\r\n    }\r\n\r\n    $: yScale = scaleLinear()\r\n        .domain(yDomain)\r\n        .nice()\r\n        .rangeRound([height - padding.bottom, padding.top]);\r\n\r\n    $: lineGen = line()\r\n        .x((v, i) => xScale(i))\r\n        .y(yScale)\r\n        .curve(curveStepAfter);\r\n    $: path = lineGen(values2);\r\n</script>\r\n\r\n<style>\r\n    h4 {\r\n        font-size: 1rem;\r\n    }\r\n    svg {\r\n        width: 100%;\r\n    }\r\n    path {\r\n        fill: none;\r\n        stroke: black;\r\n        stroke-width: 2;\r\n    }\r\n    text {\r\n        dominant-baseline: central;\r\n        font-size: 13px;\r\n        text-anchor: end;\r\n    }\r\n    line {\r\n        fill: none;\r\n        stroke: #ddd;\r\n    }\r\n    line.direct {\r\n        stroke-width: 2;\r\n        stroke: #ccc;\r\n        stroke-dasharray: 6,4;\r\n    }\r\n</style>\r\n\r\n<div bind:clientWidth={width} style=\"margin-top: 1em\">\r\n    <h4>{title}</h4>\r\n    <svg height={height || 50}>\r\n        {#if values.length}\r\n            {#each yScale.ticks(6) as y}\r\n                <text x=\"{padding.left - 5}\" y=\"{yScale(y)}\">{y}</text>\r\n                <line\r\n                    x1={padding.left}\r\n                    x2={width - padding.right}\r\n                    transform=\"translate(0,{yScale(y)})\" />\r\n            {/each}\r\n            <line\r\n                class=\"direct\"\r\n                x1={padding.left}\r\n                x2={width - padding.right}\r\n                y1={yScale(values[0])}\r\n                y2={yScale(values[values.length - 1])} />\r\n            <path d={path} />\r\n        {/if}\r\n    </svg>\r\n</div>",
    "<script>\r\n    export let title = '';\r\n    export let step = '';\r\n    /** Step badge style: 'default' | 'ring' | 'filled' | 'minimal' */\r\n    export let stepVariant = 'default';\r\n</script>\r\n\r\n<style>\r\n    .card {\r\n        margin-bottom: 14px;\r\n        background: #fff;\r\n        border: 1px solid #e5e7eb;\r\n        border-radius: 12px;\r\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);\r\n        padding: 20px 28px 16px;\r\n    }\r\n    h5.card-title {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 0.85rem;\r\n        font-size: 1.15rem;\r\n        font-weight: 600;\r\n        color: #374151;\r\n        margin-top: 0;\r\n        margin-bottom: 14px;\r\n    }\r\n    span.step {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: 28px;\r\n        height: 28px;\r\n        min-width: 28px;\r\n        min-height: 28px;\r\n        font-size: 0.9rem;\r\n        font-weight: 700;\r\n        letter-spacing: -0.02em;\r\n        flex-shrink: 0;\r\n    }\r\n    /* default: light gray rounded square */\r\n    span.step.variant-default {\r\n        background: #f3f4f6;\r\n        color: #4b5563;\r\n        border: 1px solid #d1d5db;\r\n        border-radius: 8px;\r\n        box-shadow: none;\r\n    }\r\n    /* ring: outline only, no fill */\r\n    span.step.variant-ring {\r\n        background: transparent;\r\n        color: #6b7280;\r\n        border: 2px solid #9ca3af;\r\n        border-radius: 50%;\r\n    }\r\n    /* filled: dark badge, white text */\r\n    span.step.variant-filled {\r\n        background: #374151;\r\n        color: #fff;\r\n        border: none;\r\n        border-radius: 8px;\r\n        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);\r\n    }\r\n    /* minimal: soft pill, no border */\r\n    span.step.variant-minimal {\r\n        background: #eef2ff;\r\n        color: #4338ca;\r\n        border: none;\r\n        border-radius: 999px;\r\n        width: 26px;\r\n        height: 26px;\r\n        min-width: 26px;\r\n        min-height: 26px;\r\n        font-size: 0.85rem;\r\n    }\r\n</style>\r\n\r\n<div class=\"card\">\r\n    <h5 class=\"card-title\">{#if step}<span class=\"step variant-{stepVariant}\">{step}</span>{/if}{title}</h5>\r\n    <slot />\r\n</div>\r\n",
    "<script>\r\n    import { colorBlindCheck } from './colorBlind';\r\n\r\n    $: result = colorBlindCheck(colors);\r\n\r\n    export let colors = [];\r\n    export let active = 'none';\r\n\r\n    const types = ['none', 'deuteranopia', 'protanopia', 'tritanopia'];\r\n    const typeTitles = {\r\n        none: 'Normal vision',\r\n        deuteranopia: 'Deuteranopia',\r\n        protanopia: 'Protanopia',\r\n        tritanopia: 'Tritanopia'\r\n    };\r\n</script>\r\n\r\n<style>\r\n@media (min-width: 720px) {\r\n    .colorblind-sim {\r\n        text-align: right;\r\n        position: absolute;\r\n        right: 20px;\r\n        top: -34px;\r\n    }\r\n    .res {\r\n        text-align: right;\r\n    }\r\n}\r\n\r\n.res {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    gap: 6px;\r\n    margin: 0 0 8px;\r\n    font-size: 0.9rem;\r\n    font-weight: 600;\r\n}\r\n\r\n.sim-row {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.sim-label {\r\n    color: #6b7280;\r\n    font-size: 0.85rem;\r\n    font-weight: 600;\r\n}\r\n\r\n.seg-group {\r\n    display: inline-flex;\r\n    background: #f3f4f6;\r\n    border-radius: 999px;\r\n    padding: 3px;\r\n}\r\n.seg-btn {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    padding: 0.26rem 0.6rem;\r\n    border-radius: 999px;\r\n    border: none;\r\n    background: transparent;\r\n    color: #6b7280;\r\n    font-size: 0.82rem;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    margin: 0;\r\n    line-height: 1.4;\r\n    user-select: none;\r\n}\r\n.seg-btn.active {\r\n    background: #fff;\r\n    color: #1f2937;\r\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n}\r\n.seg-btn.danger.active {\r\n    background: #fff;\r\n    color: #b91c1c;\r\n}\r\n.seg-btn input {\r\n    position: absolute;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n}\r\n\r\n</style>\r\n\r\n<div class=\"colorblind-sim\">\r\n    {#if result.length}\r\n        <p class=\"res text-danger\">Not colorblind-safe</p>\r\n    {:else}\r\n        <p class=\"res text-secondary\">Colorblind-safe</p>\r\n    {/if}\r\n    <div class=\"sim-row\">\r\n        <div class=\"sim-label\">simulate</div>\r\n        <div class=\"seg-group\" role=\"group\" aria-label=\"Colorblind simulation\">\r\n            {#each types as type}\r\n                <label\r\n                    class=\"seg-btn\"\r\n                    class:danger={result.includes(type)}\r\n                    class:active={active === type}\r\n                    title={typeTitles[type]}>\r\n                    <input\r\n                        bind:group={active}\r\n                        value={type}\r\n                        type=\"radio\"\r\n                        name=\"cbSim\"\r\n                        autocomplete=\"off\" />\r\n                    {type === 'none' ? 'normal' : type.substr(0, 4) + '.'}\r\n                </label>\r\n            {/each}\r\n        </div>\r\n    </div>\r\n</div>\r\n",
    "<script>\r\n    export let options = [];\r\n    export let value;\r\n\r\n    const id = Math.round(Math.random() * 1e7).toString(36);\r\n    $: normalizedOptions = options.map(option =>\r\n        typeof option === 'string' ? { value: option, title: option } : option\r\n    );\r\n</script>\r\n\r\n<style>\r\n\t.seg-group {\r\n\t\tdisplay: inline-flex;\r\n\t\tbackground: #f3f4f6;\r\n\t\tborder-radius: 999px;\r\n\t\tpadding: 3px;\r\n\t}\r\n\t.seg-btn {\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 0.3rem 0.85rem;\r\n\t\tborder-radius: 999px;\r\n\t\tborder: none;\r\n\t\tbackground: transparent;\r\n\t\tcolor: #6b7280;\r\n\t\tfont-size: 0.88rem;\r\n\t\tfont-weight: 500;\r\n\t\tcursor: pointer;\r\n\t\tmargin: 0;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\t.seg-btn.active {\r\n\t\tbackground: #fff;\r\n\t\tcolor: #1f2937;\r\n\t\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t.seg-btn input {\r\n\t\tposition: absolute;\r\n\t\topacity: 0;\r\n\t\tpointer-events: none;\r\n\t}\r\n</style>\r\n\r\n<div class=\"seg-group\">\r\n    {#each normalizedOptions as option}\r\n        <label class=\"seg-btn\" class:active={value === option.value}>\r\n            <input\r\n                bind:group={value}\r\n                value={option.value}\r\n                type=\"radio\"\r\n                name={id}\r\n                id={`${id}-${option.value}`}\r\n                autocomplete=\"off\"\r\n                checked={value === option.value} />\r\n            {option.title}\r\n        </label>\r\n    {/each}\r\n</div>\r\n",
    "<script>\r\n    import { createEventDispatcher } from 'svelte';\r\n\r\n    const dispatch = createEventDispatcher();\r\n\r\n    let isOpen = false;\r\n    let message = '';\r\n    let loading = false;\r\n    let error = '';\r\n\r\n    let messages = [\r\n        {\r\n            role: 'assistant',\r\n            content:\r\n                'Tell me the palette you want, for example: \"Create a calm diverging palette with 5 colors.\"'\r\n        }\r\n    ];\r\n\r\n    function buildSystemPrompt() {\r\n        return `You are a color palette assistant for a chroma.js palette tool.\r\nYour job is to convert user requests into palette settings.\r\n\r\nReturn only a JSON object with this exact shape:\r\n{\r\n  \"mode\": \"sequential\" | \"diverging\",\r\n  \"numColors\": number,\r\n  \"colors\": [\"#RRGGBB\", ...],\r\n  \"colors2\": [\"#RRGGBB\", ...],\r\n  \"bezier\": boolean,\r\n  \"correctLightness\": boolean\r\n}\r\n\r\nRules:\r\n- numColors must be >= 2\r\n- mode must be either \"sequential\" or \"diverging\"\r\n- For sequential mode: colors2 should be []\r\n- For diverging mode: provide both colors and colors2 with at least 2 color stops each\r\n- Prefer valid 6-digit hex values in colors and colors2\r\n- Do not add markdown, code fences, or explanation text`;\r\n    }\r\n\r\n    function describeAppliedConfig(config) {\r\n        const modeLabel = config.mode === 'diverging' ? 'diverging' : 'sequential';\r\n        const count = Math.max(2, Math.round(+config.numColors || 0));\r\n        const bezierLabel = config.bezier ? 'on' : 'off';\r\n        const lightnessLabel = config.correctLightness ? 'on' : 'off';\r\n        return `Applied ${modeLabel} palette with ${count} colors (bezier ${bezierLabel}, lightness correction ${lightnessLabel}).`;\r\n    }\r\n\r\n    function extractPaletteConfig(text) {\r\n        const codeBlockMatch = text.match(/```(?:json)?\\s*([\\s\\S]*?)```/i);\r\n        if (codeBlockMatch && codeBlockMatch[1]) {\r\n            try {\r\n                return JSON.parse(codeBlockMatch[1].trim());\r\n            } catch (e) {\r\n                // Fall through to looser parsing.\r\n            }\r\n        }\r\n\r\n        const start = text.indexOf('{');\r\n        const end = text.lastIndexOf('}');\r\n        if (start !== -1 && end !== -1 && end > start) {\r\n            try {\r\n                return JSON.parse(text.substring(start, end + 1));\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    async function sendMessage() {\r\n        const prompt = message.trim();\r\n        if (!prompt || loading) return;\r\n\r\n        error = '';\r\n        messages = [...messages, { role: 'user', content: prompt }];\r\n        message = '';\r\n\r\n        loading = true;\r\n        try {\r\n            const promptForModel = buildSystemPrompt();\r\n            const conversation = messages.filter(m => m.role === 'user' || m.role === 'assistant');\r\n            const response = await fetch('/api/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    messages: conversation,\r\n                    systemPrompt: promptForModel\r\n                })\r\n            });\r\n\r\n            const data = await response.json().catch(() => ({}));\r\n            const content = response.ok ? data.content : data.error || `Error (${response.status})`;\r\n\r\n            if (!response.ok) {\r\n                error = content;\r\n                return;\r\n            }\r\n\r\n            const parsed = extractPaletteConfig(content);\r\n            if (parsed) {\r\n                dispatch('applyPalette', parsed);\r\n                messages = [...messages, { role: 'assistant', content: describeAppliedConfig(parsed) }];\r\n            } else {\r\n                messages = [...messages, { role: 'assistant', content: content || 'I could not generate a response.' }];\r\n                error = content ? 'I could not parse palette JSON from the response.' : '';\r\n            }\r\n        } catch (e) {\r\n            error = (e && e.message) || 'Request failed.';\r\n        } finally {\r\n            loading = false;\r\n        }\r\n    }\r\n\r\n    function onMessageKeydown(event) {\r\n        if (event.key === 'Enter' && !event.shiftKey) {\r\n            event.preventDefault();\r\n            sendMessage();\r\n        }\r\n    }\r\n</script>\r\n\r\n<button class=\"chat-toggle\" on:click={() => (isOpen = !isOpen)} title=\"AI palette assistant\">\r\n    <svg\r\n        class=\"chat-icon\"\r\n        width=\"20\"\r\n        height=\"20\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        stroke-width=\"2\"\r\n        stroke-linecap=\"round\"\r\n        stroke-linejoin=\"round\">\r\n        <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path>\r\n    </svg>\r\n    <span class=\"chat-label\">{isOpen ? 'Close' : 'Ask AI'}</span>\r\n</button>\r\n\r\n{#if isOpen}\r\n    <div class=\"chat-panel\">\r\n        <div class=\"chat-messages\">\r\n            {#each messages as msg}\r\n                <div class=\"bubble {msg.role}\">\r\n                    <div class=\"role\">{msg.role === 'user' ? 'You' : 'AI'}</div>\r\n                    <div class=\"content\">{msg.content}</div>\r\n                </div>\r\n            {/each}\r\n        </div>\r\n\r\n        {#if error}\r\n            <div class=\"chat-error\">{error}</div>\r\n        {/if}\r\n\r\n        <div class=\"chat-input\">\r\n            <textarea\r\n                rows=\"2\"\r\n                bind:value={message}\r\n                placeholder='Try: \"Calm diverging palette with 5 colors\"'\r\n                on:keydown={onMessageKeydown} />\r\n            <button class=\"send-btn\" disabled={loading} on:click={sendMessage}>\r\n                {loading ? '...' : 'Send'}\r\n            </button>\r\n        </div>\r\n    </div>\r\n{/if}\r\n\r\n<style>\r\n    .chat-toggle {\r\n        position: fixed;\r\n        right: 24px;\r\n        bottom: 24px;\r\n        z-index: 1000;\r\n        padding: 0 16px 0 12px;\r\n        height: 48px;\r\n        border-radius: 999px;\r\n        border: none;\r\n        background: #4b6cb7;\r\n        color: #fff;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        gap: 8px;\r\n        cursor: pointer;\r\n        box-shadow: 0 4px 14px rgba(75, 108, 183, 0.4);\r\n        font-size: 0.95rem;\r\n        font-weight: 600;\r\n        font-family: inherit;\r\n    }\r\n    .chat-toggle:hover {\r\n        background: #3d5a9e;\r\n    }\r\n    .chat-toggle .chat-icon {\r\n        flex-shrink: 0;\r\n    }\r\n    .chat-toggle .chat-label {\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .chat-panel {\r\n        position: fixed;\r\n        right: 24px;\r\n        bottom: 84px;\r\n        width: 340px;\r\n        max-width: calc(100vw - 32px);\r\n        height: 480px;\r\n        max-height: calc(100vh - 110px);\r\n        display: flex;\r\n        flex-direction: column;\r\n        z-index: 1000;\r\n        border-radius: 16px;\r\n        background: rgba(255, 255, 255, 0.85);\r\n        -webkit-backdrop-filter: blur(20px);\r\n        backdrop-filter: blur(20px);\r\n        border: 1px solid rgba(0, 0, 0, 0.06);\r\n        box-shadow: 0 16px 48px rgba(0, 0, 0, 0.12);\r\n        overflow: hidden;\r\n    }\r\n\r\n    .chat-messages {\r\n        flex: 1;\r\n        overflow: auto;\r\n        padding: 16px;\r\n    }\r\n\r\n    .bubble {\r\n        margin-bottom: 10px;\r\n        padding: 10px 12px;\r\n        border-radius: 12px;\r\n    }\r\n\r\n    .bubble.user {\r\n        background: rgba(75, 108, 183, 0.1);\r\n    }\r\n\r\n    .bubble.assistant {\r\n        background: rgba(0, 0, 0, 0.03);\r\n    }\r\n\r\n    .role {\r\n        font-size: 11px;\r\n        font-weight: 600;\r\n        color: #9ca3af;\r\n        text-transform: uppercase;\r\n        letter-spacing: 0.04em;\r\n        margin-bottom: 3px;\r\n    }\r\n\r\n    .content {\r\n        white-space: pre-wrap;\r\n        font-size: 13px;\r\n        line-height: 1.45;\r\n        color: #374151;\r\n    }\r\n\r\n    .chat-error {\r\n        color: #dc2626;\r\n        font-size: 12px;\r\n        padding: 0 16px 4px;\r\n    }\r\n\r\n    .chat-input {\r\n        display: flex;\r\n        align-items: stretch;\r\n        gap: 8px;\r\n        padding: 12px 16px;\r\n        border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n    }\r\n\r\n    .chat-input textarea {\r\n        flex: 1;\r\n        resize: none;\r\n        border: 1px solid #e5e7eb;\r\n        border-radius: 10px;\r\n        padding: 8px 10px;\r\n        font-size: 13px;\r\n        font-family: inherit;\r\n        line-height: 1.4;\r\n        background: #fff;\r\n        margin: 0;\r\n    }\r\n    .chat-input textarea:focus {\r\n        outline: none;\r\n        border-color: #4b6cb7;\r\n    }\r\n\r\n    .send-btn {\r\n        padding: 0 14px;\r\n        border: none;\r\n        border-radius: 10px;\r\n        background: #4b6cb7;\r\n        color: #fff;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        cursor: pointer;\r\n        white-space: nowrap;\r\n        margin: 0;\r\n        min-width: 64px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .send-btn:hover {\r\n        background: #3d5a9e;\r\n    }\r\n    .send-btn:disabled {\r\n        opacity: 0.5;\r\n        cursor: not-allowed;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    import chroma from 'chroma-js';\r\n    import Color from './Color.svelte';\r\n\r\n    export let colors;\r\n    let edit = false;\r\n    let input;\r\n\r\n    let colorString = '';\r\n\r\n    function enterEditMode() {\r\n        edit = true;\r\n        colorString = colors.map(c => c.name()).join(', ');\r\n        input.focus();\r\n    }\r\n\r\n    function exitEditMode() {\r\n        edit = false;\r\n        colors = colorString\r\n            .split(/\\s*[,|\\s]\\s*/)\r\n            .filter(c => chroma.valid(c))\r\n            .map(c => chroma(c));\r\n    }\r\n\r\n    function dragstart(event, index) {\r\n        event.dataTransfer.setData('index', index);\r\n    }\r\n\r\n    function dragover(event) {\r\n        event.dataTransfer.dropEffect = 'move';\r\n    }\r\n\r\n    function drop(event) {\r\n        const index = +event.dataTransfer.getData('index');\r\n        const newIndex = findIndex(event.target);\r\n        const col = colors.splice(index, 1, null)[0];\r\n        colors.splice(newIndex, 0, col);\r\n        colors = colors.filter(c => c !== null);\r\n    }\r\n\r\n    function findIndex(el) {\r\n        const siblings = el.parentNode.children;\r\n        for (let i = 0; i < siblings.length; i++) {\r\n            if (siblings[i] === el) return i;\r\n        }\r\n        return -1;\r\n    }\r\n</script>\r\n\r\n<style>\r\n    div.form-control {\r\n        cursor: text;\r\n        height: auto;\r\n    }\r\n    .hidden {\r\n        position: absolute;\r\n        opacity: 0;\r\n        left: -99999px;\r\n    }\r\n    span.inv {\r\n        display: inline-block;\r\n        width: 60px;\r\n        background: white;\r\n        height: 100%;\r\n        vertical-align: bottom;\r\n    }\r\n</style>\r\n\r\n<input\r\n    class:hidden={!edit}\r\n    bind:this={input}\r\n    type=\"text\"\r\n    class=\"form-control\"\r\n    bind:value={colorString}\r\n    on:blur={exitEditMode} />\r\n{#if !edit}\r\n    <div\r\n        on:drop|preventDefault={drop}\r\n        on:dragover|preventDefault={dragover}\r\n        class=\"form-control\"\r\n        on:click={enterEditMode}>\r\n        {#each colors as color, i}\r\n            <Color bind:value={color} on:dragstart={(event) => dragstart(event, i)} />\r\n        {/each}\r\n        <span class=\"inv\"></span>\r\n    </div>\r\n{/if}",
    "<script>\r\n    import chroma from 'chroma-js';\r\n    import range from 'lodash-es/range';\r\n    export let value = chroma('red');\r\n\r\n    let open = false;\r\n    let dragging = false;\r\n\r\n    function toggleEditOpen() {\r\n        open = true;\r\n    }\r\n    function toggleEditClose() {\r\n        open = false;\r\n    }\r\n\r\n    $: lch = value.lch();\r\n    $: lightness = range(-5, 6)\r\n        .map(l => lch[0] + Math.pow(l / 8, 2) * 80 * (l < 0 ? -1 : 1))\r\n        .map(l => chroma.lch(l, lch[1], lch[2]));\r\n    $: saturation = range(-5, 6)\r\n        .map(s => Math.max(0, lch[1] + Math.pow(s / 5, 2) * 80 * (s < 0 ? -1 : 1)))\r\n        .map(s => chroma.lch(lch[0], s, lch[2]));\r\n    $: hue = range(-5, 6)\r\n        .map(h => lch[2] + Math.pow(h / 5, 2) * 80 * (h < 0 ? -1 : 1))\r\n        .map(h =>\r\n            chroma.lch(lch[0], lch[1], h < 0 ? h + 360 : h > 360 ? h - 360 : h)\r\n        );\r\n</script>\r\n\r\n<style>\r\n    span.badge {\r\n        font-weight: normal;\r\n        font-size: 100%;\r\n        color: #000;\r\n        position: relative;\r\n    }\r\n    .badge + .badge {\r\n        margin-left: 1ex;\r\n    }\r\n    span.inverted {\r\n        color: white;\r\n    }\r\n    .popover {\r\n        position: absolute;\r\n        top: 30px;\r\n        left: -100px;\r\n        width: 300px;\r\n    }\r\n    .color-row {\r\n        display: flex;\r\n        margin-bottom: 3px;\r\n    }\r\n    span.lbl {\r\n        width: 8.333%;\r\n    }\r\n    span.color {\r\n        display: inline-block;\r\n        height: 30px;\r\n        width: 8.333%;\r\n        border-left: 1px solid white;\r\n        border-bottom: 1px solid white;\r\n    }\r\n    span.color:nth-child(7) {\r\n        border: 2px solid black;\r\n        margin-top: -1px;\r\n        margin-right: 0;\r\n        height: 31px;\r\n    }\r\n    span.color:nth-child(8) {\r\n        border-left: 0;\r\n    }\r\n    span.hex {\r\n        pointer-events: none;\r\n    }\r\n</style>\r\n<span\r\n    on:dragstart=\"{(event) => dragging = true}\"\r\n    on:dragend=\"{(event) => ((dragging = false), (open = false))}\"\r\n    draggable=\"true\"\r\n    on:mouseenter={toggleEditOpen}\r\n    on:mouseleave={toggleEditClose}\r\n    on:click|stopPropagation=\"{() => false}\"\r\n    class:inverted={value.lab()[0] < 50}\r\n    class=\"badge shadow-sm\"\r\n    style=\"background: {value.hex()}\">\r\n    <span class=\"hex\">{value.hex().substr(1)}</span>\r\n    {#if open && !dragging}\r\n        <div style=\"position: absolute; top: 0; left: 0; right: 0; height: 40px\">\r\n            <div\r\n                class=\"popover fade show bs-popover-bottom\"\r\n                role=\"tooltip\"\r\n                x-placement=\"bottom\">\r\n                <div class=\"arrow\" style=\"left: 121px;\"></div>\r\n                <div class=\"popover-header\" aria-hidden=\"true\"></div>\r\n                <div class=\"popover-body\">\r\n                    <div class=\"color-row\">\r\n                        <span class=\"lbl\">L</span>\r\n                        {#each lightness as l}\r\n                            <span on:click={() => (value = l)} class=\"color\" style=\"background: {l.hex()}\"></span>\r\n                        {/each}\r\n                    </div>\r\n                    <div class=\"color-row\">\r\n                        <span class=\"lbl\">S</span>\r\n                        {#each saturation as c}\r\n                            <span on:click={() => (value = c)} class=\"color\" style=\"background: {c.hex()}\"></span>\r\n                        {/each}\r\n                    </div>\r\n                    <div class=\"color-row\">\r\n                        <span class=\"lbl\">H</span>\r\n                        {#each hue as c}\r\n                            <span on:click={() => (value = c)} class=\"color\" style=\"background: {c.hex()}\"></span>\r\n                        {/each}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    {/if}\r\n</span>\r\n\r\n"
  ],
  "names": [],
  "mappings": "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"
}